"use strict";
/*
 * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the "license" file accompanying this file. This file is distributed
 * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.TestAct = exports.DateManagerWithConfirmation = exports.DateManager2 = exports.DateManager = void 0;
const tslib_1 = require("tslib");
const chai_1 = require("chai");
const mocha_1 = require("mocha");
const sinon_1 = tslib_1.__importDefault(require("sinon"));
const DateControl_1 = require("../../src/commonControls/DateControl");
const Strings_1 = require("../../src/constants/Strings");
const ControlManager_1 = require("../../src/controls/ControlManager");
const ControlResult_1 = require("../../src/controls/ControlResult");
const GeneralControlIntent_1 = require("../../src/intents/GeneralControlIntent");
const ControlResponseBuilder_1 = require("../../src/responseGeneration/ControlResponseBuilder");
const ControlHandler_1 = require("../../src/runtime/ControlHandler");
const TestingUtils_1 = require("../../src/utils/testSupport/TestingUtils");
const OrdinalControlIntent_1 = require("../../src/intents/OrdinalControlIntent");
const src_1 = require("../../src");
function dateControlUnderTest() {
    return new DateControl_1.DateControl({
        id: 'dateControl',
        validation: [DateControl_1.DateControlValidations.FUTURE_DATE_ONLY],
        required: true,
        interactionModel: {
            targets: ['food', Strings_1.Strings.Target.Date],
            actions: {
                set: [Strings_1.Strings.Action.Set, 'deliver'],
                change: [Strings_1.Strings.Action.Change]
            },
        }
    });
}
function dateControlUnderTest2() {
    return new DateControl_1.DateControl({
        id: 'dateControl2',
        validation: [DateControl_1.DateControlValidations.PAST_DATE_ONLY],
        required: true,
        interactionModel: {
            targets: [Strings_1.Strings.Target.Date],
            actions: {
                set: [Strings_1.Strings.Action.Set],
                change: [Strings_1.Strings.Action.Change]
            },
        }
    });
}
class DateManager extends ControlManager_1.ControlManager {
    createControlTree() {
        return dateControlUnderTest();
    }
}
exports.DateManager = DateManager;
class DateManager2 extends ControlManager_1.ControlManager {
    createControlTree() {
        return dateControlUnderTest2();
    }
}
exports.DateManager2 = DateManager2;
class DateManagerWithConfirmation extends ControlManager_1.ControlManager {
    createControlTree() {
        return new DateControl_1.DateControl({
            id: 'dateControlConfirm',
            required: true,
            confirmationRequired: true,
            validation: DateControl_1.DateControlValidations.PAST_DATE_ONLY,
            interactionModel: {
                targets: [Strings_1.Strings.Target.Date],
                actions: {
                    set: [Strings_1.Strings.Action.Set],
                    change: [Strings_1.Strings.Action.Change]
                },
            },
            prompts: {
                valueSet: '',
                valueChanged: ''
            }
        });
    }
}
exports.DateManagerWithConfirmation = DateManagerWithConfirmation;
class TestAct extends src_1.ContentAct {
    constructor(control, test) {
        super(control);
        this.test = test;
    }
    render(input, responseBuilder) {
        throw new Error('Not implemented.');
    }
}
exports.TestAct = TestAct;
TestingUtils_1.waitForDebugger();
mocha_1.suite('DateControl tests', () => {
    beforeEach(() => {
        // set now to 2019-01-03
        sinon_1.default.useFakeTimers(new Date('2019-01-03T21:55:38.151Z'));
    });
    afterEach(() => {
        sinon_1.default.restore();
    });
    mocha_1.suite('DateControl scenarios', () => {
        const emptyInput = TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({}));
        mocha_1.test('set value with valid date should be processed.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'AMAZON.DATE': '2020' }));
            const canHandleResult = control.canHandle(input);
            chai_1.expect(canHandleResult).true;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            await control.handle(input, result);
            chai_1.expect(result.acts).length(1);
            chai_1.expect(result.acts[0]).instanceOf(src_1.ValueSetAct);
            chai_1.expect(result.acts[0].payload.value).eq('2020');
        });
        mocha_1.test('set value with invalid choice should be rejected.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'action': Strings_1.Strings.Action.Set, 'target': 'food', 'AMAZON.DATE': '2019-01-01' }));
            const canHandleResult = control.canHandle(input);
            chai_1.expect(canHandleResult).true;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            await control.handle(input, result);
            chai_1.expect(result.acts).length(2);
            chai_1.expect(result.acts[0]).instanceOf(src_1.InvalidValueAct);
            chai_1.expect(result.acts[1]).instanceOf(src_1.RequestValueAct);
        });
        mocha_1.test('change date intent should be handled.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change, target: Strings_1.Strings.Target.Date }));
            const canHandleResult = control.canHandle(input);
            chai_1.expect(canHandleResult).true;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            await control.handle(input, result);
            chai_1.expect(result.acts).length(1);
            chai_1.expect(result.acts[0]).instanceOf(src_1.RequestChangedValueAct);
        });
        mocha_1.test('test controller clear state function.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'AMAZON.DATE': '2019-01-01' }));
            const canHandleResult = control.canHandle(input);
            chai_1.expect(canHandleResult).true;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            await control.handle(input, result);
            chai_1.expect(result.acts).length(2);
            chai_1.expect(result.acts[0]).instanceOf(src_1.InvalidValueAct);
            chai_1.expect(result.acts[1]).instanceOf(src_1.RequestValueAct);
            control.clear();
            chai_1.expect(control.state.value).equal(undefined);
        });
        mocha_1.test('test controller renderResultItem throws error for unhandled acts.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change, target: Strings_1.Strings.Target.Date }));
            const result = new ControlResponseBuilder_1.ControlResponseBuilder(undefined);
            try {
                control.renderAct(new TestAct(control, 'test'), input, result);
            }
            catch (err) {
                chai_1.expect(err.message).equal('No NLG for TestAct:{"takesInitiative":false,"test":"test","controlId":"dateControl"}');
            }
        });
        mocha_1.test('test controller handle call with invalid canHandle boolean throws error.', async () => {
            const control = dateControlUnderTest();
            const input = TestingUtils_1.TestInput.of(OrdinalControlIntent_1.OrdinalControlIntent.of({}));
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            try {
                await control.handle(input, result);
            }
            catch (err) {
                chai_1.expect(err.message).equal(`${OrdinalControlIntent_1.OrdinalControlIntent.name} can not be handled by ${control.constructor.name}.`);
            }
        });
        mocha_1.test('test controller takeInitiative call with invalid canTakeInitiative throws error', async () => {
            const control = dateControlUnderTest();
            const input = emptyInput;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            try {
                await control.takeInitiative(input, result);
            }
            catch (err) {
                chai_1.expect(err.message).equal('DateControl: takeInitiative called but this.initiativeFunc is not set. canTakeInitiative() should be called first to set this.initiativeFunc.');
            }
        });
        mocha_1.test('test controller askElicitationQuestion throws error for invalid action.', async () => {
            const control = dateControlUnderTest();
            const input = emptyInput;
            const result = new ControlResult_1.ControlResultBuilder(undefined);
            try {
                await control.askElicitationQuestion(input, result, 'delete');
            }
            catch (err) {
                chai_1.expect(err.message).equal('Unhandled. Unknown elicitationAction: delete');
            }
        });
    });
    mocha_1.suite('DateControl e2e tests', () => {
        mocha_1.test('Respond to Alexa\'s question with valid date', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: set', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Set })),
                'A: What date?',
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020' })),
                'A: OK.',
            ]);
        });
        mocha_1.test('Respond to Alexa\'s question with invalid date', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Sorry but that\'s not a valid date because the date cannot be less than today. What date?',
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020-01-01' })),
                'A: OK.'
            ]);
        });
        mocha_1.test('Respond to Alexa\'s question with invalid past date', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager2());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2021' })),
                'A: Sorry but that\'s not a valid date because the date cannot be greater than today. What date?',
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: OK.',
            ]);
        });
        mocha_1.test('Change date with value after setting', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020' })),
                'A: OK.',
                'U: change date to 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'action': Strings_1.Strings.Action.Change, 'target': Strings_1.Strings.Target.Date, "AMAZON.DATE": '2021' })),
                'A: Changed from 2020 to 2021.',
            ]);
        });
        mocha_1.test('Change date to invalid value after setting', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020' })),
                'A: OK.',
                'U: change date to 2016', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'action': Strings_1.Strings.Action.Change, 'target': Strings_1.Strings.Target.Date, "AMAZON.DATE": '2016' })),
                'A: Sorry but that\'s not a valid date because the date cannot be less than today. What should I change it to?',
                'U: 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'action': Strings_1.Strings.Action.Change, "AMAZON.DATE": '2021' })),
                'A: Changed from 2016 to 2021.',
            ]);
        });
        mocha_1.test('Change date after setting', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020' })),
                'A: OK.',
                'U: change', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change })),
                'A: What should I change it to?',
                'U: change to 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'action': Strings_1.Strings.Action.Change, "AMAZON.DATE": '2021' })),
                'A: Changed from 2020 to 2021.',
            ]);
        });
        mocha_1.test('Change date after setting and later set it to a different value', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 1993', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '1993' })),
                'A: Sorry but that\'s not a valid date because the date cannot be less than today. What date?',
                'U: 2020', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2020' })),
                'A: OK.',
                'U: change', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change })),
                'A: What should I change it to?',
                'U: change to 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "action": Strings_1.Strings.Action.Change, "AMAZON.DATE": '2021' })),
                'A: Changed from 2020 to 2021.',
                'U: actually set it to', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Set })),
                'A: What date?',
                'U: 2025', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2025' })),
                'A: OK.'
            ]);
        });
        mocha_1.test('Change date to invalid value after setting', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: change', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change })),
                'A: What should I change it to?',
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Sorry but that\'s not a valid date because the date cannot be less than today. What should I change it to?',
                'U: 2021', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2021' })),
                'A: Changed from 2018 to 2021.'
            ]);
        });
        mocha_1.test('date valid, needs explicit affirming', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManagerWithConfirmation());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Was that 2018?',
                'U: Yeah.', TestingUtils_1.TestInput.of(src_1.IntentBuilder.of(src_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
        });
        mocha_1.test('date value after disaffirmation, requires request value act', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManagerWithConfirmation());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Was that 2018?',
                'U: No.', TestingUtils_1.TestInput.of(src_1.IntentBuilder.of(src_1.AmazonIntent.NoIntent)),
                'A: My mistake. What date?'
            ]);
        });
        mocha_1.test('date value set and changing it requires value changed act', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManagerWithConfirmation());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Was that 2018?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.',
                'U: Change to 08-12-1993.', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '08-12-1993', "action": Strings_1.Strings.Action.Change })),
                'A: Was that 08-12-1993?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
        });
        mocha_1.test('date value set and changing it to invalid requires confirmation and checks for validations', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new DateManagerWithConfirmation());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: 2018', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2018' })),
                'A: Was that 2018?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.',
                'U: Change to 2021.', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2021', "action": Strings_1.Strings.Action.Change })),
                'A: Sorry but that\'s not a valid date because the date cannot be greater than today. What should I change it to?',
                'U: 2000.', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2000' })),
                'A: Was that 2000?',
                'U: No.', TestingUtils_1.TestInput.of(src_1.IntentBuilder.of(src_1.AmazonIntent.NoIntent)),
                'A: My mistake. What date?',
                'U: 2016.', TestingUtils_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { "AMAZON.DATE": '2016' })),
                'A: Was that 2016?',
                'U: Yes.', TestingUtils_1.TestInput.of(src_1.IntentBuilder.of(src_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZUNvbnRyb2wuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3QvY29tbW9uQ29udHJvbFRlc3RzL0RhdGVDb250cm9sLnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7OztHQVdHOzs7O0FBRUgsK0JBQThCO0FBQzlCLGlDQUFvQztBQUNwQywwREFBMEI7QUFDMUIsc0VBQTJGO0FBQzNGLHlEQUEyRDtBQUUzRCxzRUFBbUU7QUFDbkUsb0VBQXdFO0FBQ3hFLGlGQUE4RTtBQUM5RSxnR0FBNkY7QUFDN0YscUVBQWtFO0FBQ2xFLDJFQUErRjtBQUMvRixpRkFBOEU7QUFDOUUsbUNBQTJOO0FBRTNOLFNBQVMsb0JBQW9CO0lBQ3pCLE9BQU8sSUFBSSx5QkFBVyxDQUFDO1FBQ25CLEVBQUUsRUFBRSxhQUFhO1FBQ2pCLFVBQVUsRUFBRSxDQUFDLG9DQUFzQixDQUFDLGdCQUFnQixDQUFDO1FBQ3JELFFBQVEsRUFBRSxJQUFJO1FBQ2QsZ0JBQWdCLEVBQUU7WUFDZCxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsaUJBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ2hDLE9BQU8sRUFBRTtnQkFDTCxHQUFHLEVBQUUsQ0FBQyxpQkFBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDO2dCQUM5QixNQUFNLEVBQUUsQ0FBQyxpQkFBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDNUI7U0FDSjtLQUNKLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxTQUFTLHFCQUFxQjtJQUMxQixPQUFPLElBQUkseUJBQVcsQ0FBQztRQUNuQixFQUFFLEVBQUUsY0FBYztRQUNsQixVQUFVLEVBQUUsQ0FBQyxvQ0FBc0IsQ0FBQyxjQUFjLENBQUM7UUFDbkQsUUFBUSxFQUFFLElBQUk7UUFDZCxnQkFBZ0IsRUFBRTtZQUNkLE9BQU8sRUFBRSxDQUFDLGlCQUFDLENBQUMsTUFBTSxD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UyxDQUFDLEVBQUUsQ0FBQyw4QkFBd0IsQ0FBQyxFQUFFLENBQUMsMkJBQXFCLENBQUMsSUFBSSxFQUFFLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsaUJBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDakosa0hBQWtIO2dCQUNsSCxVQUFVLEVBQUUsd0JBQVMsQ0FBQyxFQUFFLENBQUMsOEJBQXdCLENBQUMsRUFBRSxDQUFDLDJCQUFxQixDQUFDLElBQUksRUFBRSxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO2dCQUMzRyxtQkFBbUI7Z0JBQ25CLFFBQVEsRUFBRSx3QkFBUyxDQUFDLEVBQUUsQ0FBQyxtQkFBYSxDQUFDLEVBQUUsQ0FBQyxrQkFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMvRCwyQkFBMkI7Z0JBQzNCLFVBQVUsRUFBRSx3QkFBUyxDQUFDLEVBQUUsQ0FBQyw4QkFBd0IsQ0FBQyxFQUFFLENBQUMsMkJBQXFCLENBQUMsSUFBSSxFQUFFLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7Z0JBQzNHLG1CQUFtQjtnQkFDbkIsU0FBUyxFQUFFLHdCQUFTLENBQUMsRUFBRSxDQUFDLG1CQUFhLENBQUMsRUFBRSxDQUFDLGtCQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2pFLFdBQVc7YUFDZCxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjAgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuXG4gKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBvciBpbiB0aGUgXCJsaWNlbnNlXCIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWRcbiAqIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmdcbiAqIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCB7IHN1aXRlLCB0ZXN0IH0gZnJvbSBcIm1vY2hhXCI7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IHsgRGF0ZUNvbnRyb2wsIERhdGVDb250cm9sVmFsaWRhdGlvbnMgfSBmcm9tICcuLi8uLi9zcmMvY29tbW9uQ29udHJvbHMvRGF0ZUNvbnRyb2wnO1xuaW1wb3J0IHsgU3RyaW5ncyBhcyAkIH0gZnJvbSBcIi4uLy4uL3NyYy9jb25zdGFudHMvU3RyaW5nc1wiO1xuaW1wb3J0IHsgQ29udHJvbCB9IGZyb20gJy4uLy4uL3NyYy9jb250cm9scy9Db250cm9sJztcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRyb2xzL0NvbnRyb2xNYW5hZ2VyJztcbmltcG9ydCB7IENvbnRyb2xSZXN1bHRCdWlsZGVyIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRyb2xzL0NvbnRyb2xSZXN1bHQnO1xuaW1wb3J0IHsgR2VuZXJhbENvbnRyb2xJbnRlbnQgfSBmcm9tICcuLi8uLi9zcmMvaW50ZW50cy9HZW5lcmFsQ29udHJvbEludGVudCc7XG5pbXBvcnQgeyBDb250cm9sUmVzcG9uc2VCdWlsZGVyIH0gZnJvbSAnLi4vLi4vc3JjL3Jlc3BvbnNlR2VuZXJhdGlvbi9Db250cm9sUmVzcG9uc2VCdWlsZGVyJztcbmltcG9ydCB7IENvbnRyb2xIYW5kbGVyIH0gZnJvbSAnLi4vLi4vc3JjL3J1bnRpbWUvQ29udHJvbEhhbmRsZXInO1xuaW1wb3J0IHsgdGVzdEUyRSwgVGVzdElucHV0LCB3YWl0Rm9yRGVidWdnZXIgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvdGVzdFN1cHBvcnQvVGVzdGluZ1V0aWxzJztcbmltcG9ydCB7IE9yZGluYWxDb250cm9sSW50ZW50IH0gZnJvbSAnLi4vLi4vc3JjL2ludGVudHMvT3JkaW5hbENvbnRyb2xJbnRlbnQnO1xuaW1wb3J0IHsgQ29udGVudEFjdCwgQ29udHJvbElucHV0LCBTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQsIEFtYXpvbkJ1aWx0SW5TbG90VHlwZSwgVmFsdWVTZXRBY3QsIEludmFsaWRWYWx1ZUFjdCwgUmVxdWVzdFZhbHVlQWN0LCBSZXF1ZXN0Q2hhbmdlZFZhbHVlQWN0LCBJbnRlbnRCdWlsZGVyLCBBbWF6b25JbnRlbnQsIFZhbHVlQ2hhbmdlZEFjdCB9IGZyb20gJy4uLy4uL3NyYyc7XG5cbmZ1bmN0aW9uIGRhdGVDb250cm9sVW5kZXJUZXN0KCk6IERhdGVDb250cm9sIHtcbiAgICByZXR1cm4gbmV3IERhdGVDb250cm9sKHtcbiAgICAgICAgaWQ6ICdkYXRlQ29udHJvbCcsXG4gICAgICAgIHZhbGlkYXRpb246IFtEYXRlQ29udHJvbFZhbGlkYXRpb25zLkZVVFVSRV9EQVRFX09OTFldLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgaW50ZXJhY3Rpb25Nb2RlbDoge1xuICAgICAgICAgICAgdGFyZ2V0czogWydmb29kJywgJC5UYXJnZXQuRGF0ZV0sXG4gICAgICAgICAgICBhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgc2V0OiBbJC5BY3Rpb24uU2V0LCAnZGVsaXZlciddLFxuICAgICAgICAgICAgICAgIGNoYW5nZTogWyQuQWN0aW9uLkNoYW5nZV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gZGF0ZUNvbnRyb2xVbmRlclRlc3QyKCk6IERhdGVDb250cm9sIHtcbiAgICByZXR1cm4gbmV3IERhdGVDb250cm9sKHtcbiAgICAgICAgaWQ6ICdkYXRlQ29udHJvbDInLFxuICAgICAgICB2YWxpZGF0aW9uOiBbRGF0ZUNvbnRyb2xWYWxpZGF0aW9ucy5QQVNUX0RBVEVfT05MWV0sXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBpbnRlcmFjdGlvbk1vZGVsOiB7XG4gICAgICAgICAgICB0YXJnZXRzOiBbJC5UYXJnZXQuRGF0ZV0sXG4gICAgICAgICAgICBhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgc2V0OiBbJC5BY3Rpb24uU2V0XSxcbiAgICAgICAgICAgICAgICBjaGFuZ2U6IFskLkFjdGlvbi5DaGFuZ2VdXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlTWFuYWdlciBleHRlbmRzIENvbnRyb2xNYW5hZ2VyIHtcbiAgICBjcmVhdGVDb250cm9sVHJlZSgpOiBDb250cm9sIHtcbiAgICAgICAgcmV0dXJuIGRhdGVDb250cm9sVW5kZXJUZXN0KCk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGF0ZU1hbmFnZXIyIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgIGNyZWF0ZUNvbnRyb2xUcmVlKCk6IENvbnRyb2wge1xuICAgICAgICByZXR1cm4gZGF0ZUNvbnRyb2xVbmRlclRlc3QyKCk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGF0ZU1hbmFnZXJXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgIGNyZWF0ZUNvbnRyb2xUcmVlKCk6IENvbnRyb2wge1xuICAgICAgICByZXR1cm4gbmV3IERhdGVDb250cm9sKHtcbiAgICAgICAgICAgIGlkOiAnZGF0ZUNvbnRyb2xDb25maXJtJyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlybWF0aW9uUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBEYXRlQ29udHJvbFZhbGlkYXRpb25zLlBBU1RfREFURV9PTkxZLFxuICAgICAgICAgICAgaW50ZXJhY3Rpb25Nb2RlbDoge1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IFskLlRhcmdldC5EYXRlXSxcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHNldDogWyQuQWN0aW9uLlNldF0sXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZTogWyQuQWN0aW9uLkNoYW5nZV1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb21wdHM6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZVNldDogJycsXG4gICAgICAgICAgICAgICAgdmFsdWVDaGFuZ2VkOiAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXN0QWN0IGV4dGVuZHMgQ29udGVudEFjdCB7XG4gICAgdGVzdD86IHN0cmluZztcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sOiBDb250cm9sLCB0ZXN0OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoY29udHJvbCk7XG4gICAgICAgIHRoaXMudGVzdCA9IHRlc3Q7XG4gICAgfVxuICAgIHJlbmRlcihpbnB1dDogQ29udHJvbElucHV0LCByZXNwb25zZUJ1aWxkZXI6IENvbnRyb2xSZXNwb25zZUJ1aWxkZXIpOiB2b2lkIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxufVxuXG53YWl0Rm9yRGVidWdnZXIoKTtcblxuc3VpdGUoJ0RhdGVDb250cm9sIHRlc3RzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAvLyBzZXQgbm93IHRvIDIwMTktMDEtMDNcbiAgICAgICAgc2lub24udXNlRmFrZVRpbWVycyhuZXcgRGF0ZSgnMjAxOS0wMS0wM1QyMTo1NTozOC4xNTFaJykpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgICAgc2lub24ucmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgc3VpdGUoJ0RhdGVDb250cm9sIHNjZW5hcmlvcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgZW1wdHlJbnB1dCA9IFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7fSkpO1xuXG4gICAgICAgIHRlc3QoJ3NldCB2YWx1ZSB3aXRoIHZhbGlkIGRhdGUgc2hvdWxkIGJlIHByb2Nlc3NlZC4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sID0gZGF0ZUNvbnRyb2xVbmRlclRlc3QoKTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeydBTUFaT04uREFURSc6ICcyMDIwJyB9KSk7XG4gICAgICAgICAgICBjb25zdCBjYW5IYW5kbGVSZXN1bHQgPSBjb250cm9sLmNhbkhhbmRsZShpbnB1dCk7XG4gICAgICAgICAgICBleHBlY3QoY2FuSGFuZGxlUmVzdWx0KS50cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IENvbnRyb2xSZXN1bHRCdWlsZGVyKHVuZGVmaW5lZCEpO1xuICAgICAgICAgICAgYXdhaXQgY29udHJvbC5oYW5kbGUoaW5wdXQsIHJlc3VsdCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuYWN0cykubGVuZ3RoKDEpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5hY3RzWzBdKS5pbnN0YW5jZU9mKFZhbHVlU2V0QWN0KTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVzdWx0LmFjdHNbMF0gYXMgVmFsdWVTZXRBY3Q8YW55PikucGF5bG9hZC52YWx1ZSkuZXEoJzIwMjAnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnc2V0IHZhbHVlIHdpdGggaW52YWxpZCBjaG9pY2Ugc2hvdWxkIGJlIHJlamVjdGVkLicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBkYXRlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7ICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsICd0YXJnZXQnOiAnZm9vZCcsICdBTUFaT04uREFURSc6ICcyMDE5LTAxLTAxJyB9KSk7XG4gICAgICAgICAgICBjb25zdCBjYW5IYW5kbGVSZXN1bHQgPSBjb250cm9sLmNhbkhhbmRsZShpbnB1dCk7XG4gICAgICAgICAgICBleHBlY3QoY2FuSGFuZGxlUmVzdWx0KS50cnVlO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IENvbnRyb2xSZXN1bHRCdWlsZGVyKHVuZGVmaW5lZCEpO1xuICAgICAgICAgICAgYXdhaXQgY29udHJvbC5oYW5kbGUoaW5wdXQsIHJlc3VsdCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuYWN0cykubGVuZ3RoKDIpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5hY3RzWzBdKS5pbnN0YW5jZU9mKEludmFsaWRWYWx1ZUFjdCk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmFjdHNbMV0pLmluc3RhbmNlT2YoUmVxdWVzdFZhbHVlQWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnY2hhbmdlIGRhdGUgaW50ZW50IHNob3VsZCBiZSBoYW5kbGVkLicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBkYXRlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBhY3Rpb246ICQuQWN0aW9uLkNoYW5nZSwgdGFyZ2V0OiAkLlRhcmdldC5EYXRlIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbkhhbmRsZVJlc3VsdCA9IGNvbnRyb2wuY2FuSGFuZGxlKGlucHV0KTtcbiAgICAgICAgICAgIGV4cGVjdChjYW5IYW5kbGVSZXN1bHQpLnRydWU7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQ29udHJvbFJlc3VsdEJ1aWxkZXIodW5kZWZpbmVkISk7XG4gICAgICAgICAgICBhd2FpdCBjb250cm9sLmhhbmRsZShpbnB1dCwgcmVzdWx0KTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5hY3RzKS5sZW5ndGgoMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmFjdHNbMF0pLmluc3RhbmNlT2YoUmVxdWVzdENoYW5nZWRWYWx1ZUFjdCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZXN0KCd0ZXN0IGNvbnRyb2xsZXIgY2xlYXIgc3RhdGUgZnVuY3Rpb24uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbCA9IGRhdGVDb250cm9sVW5kZXJUZXN0KCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsnQU1BWk9OLkRBVEUnOiAnMjAxOS0wMS0wMScgfSkpO1xuICAgICAgICAgICAgY29uc3QgY2FuSGFuZGxlUmVzdWx0ID0gY29udHJvbC5jYW5IYW5kbGUoaW5wdXQpO1xuICAgICAgICAgICAgZXhwZWN0KGNhbkhhbmRsZVJlc3VsdCkudHJ1ZTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IENvbnRyb2xSZXN1bHRCdWlsZGVyKHVuZGVmaW5lZCEpO1xuICAgICAgICAgICAgYXdhaXQgY29udHJvbC5oYW5kbGUoaW5wdXQsIHJlc3VsdCk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmFjdHMpLmxlbmd0aCgyKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuYWN0c1swXSkuaW5zdGFuY2VPZihJbnZhbGlkVmFsdWVBY3QpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5hY3RzWzFdKS5pbnN0YW5jZU9mKFJlcXVlc3RWYWx1ZUFjdCk7XG5cbiAgICAgICAgICAgIGNvbnRyb2wuY2xlYXIoKTtcbiAgICAgICAgICAgIGV4cGVjdChjb250cm9sLnN0YXRlLnZhbHVlKS5lcXVhbCh1bmRlZmluZWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCd0ZXN0IGNvbnRyb2xsZXIgcmVuZGVyUmVzdWx0SXRlbSB0aHJvd3MgZXJyb3IgZm9yIHVuaGFuZGxlZCBhY3RzLicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBkYXRlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBhY3Rpb246ICQuQWN0aW9uLkNoYW5nZSwgdGFyZ2V0OiAkLlRhcmdldC5EYXRlIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBDb250cm9sUmVzcG9uc2VCdWlsZGVyKHVuZGVmaW5lZCEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb250cm9sLnJlbmRlckFjdChuZXcgVGVzdEFjdChjb250cm9sLCAndGVzdCcpLCBpbnB1dCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBleHBlY3QoZXJyLm1lc3NhZ2UpLmVxdWFsKCdObyBOTEcgZm9yIFRlc3RBY3Q6e1widGFrZXNJbml0aWF0aXZlXCI6ZmFsc2UsXCJ0ZXN0XCI6XCJ0ZXN0XCIsXCJjb250cm9sSWRcIjpcImRhdGVDb250cm9sXCJ9Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Rlc3QgY29udHJvbGxlciBoYW5kbGUgY2FsbCB3aXRoIGludmFsaWQgY2FuSGFuZGxlIGJvb2xlYW4gdGhyb3dzIGVycm9yLicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wgPSBkYXRlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoT3JkaW5hbENvbnRyb2xJbnRlbnQub2Yoe30pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBDb250cm9sUmVzdWx0QnVpbGRlcih1bmRlZmluZWQhKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY29udHJvbC5oYW5kbGUoaW5wdXQsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVyci5tZXNzYWdlKS5lcXVhbChgJHtPcmRpbmFsQ29udHJvbEludGVudC5uYW1lfSBjYW4gbm90IGJlIGhhbmRsZWQgYnkgJHtjb250cm9sLmNvbnN0cnVjdG9yLm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCd0ZXN0IGNvbnRyb2xsZXIgdGFrZUluaXRpYXRpdmUgY2FsbCB3aXRoIGludmFsaWQgY2FuVGFrZUluaXRpYXRpdmUgdGhyb3dzIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbCA9IGRhdGVDb250cm9sVW5kZXJUZXN0KCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGVtcHR5SW5wdXQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQ29udHJvbFJlc3VsdEJ1aWxkZXIodW5kZWZpbmVkISk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRyb2wudGFrZUluaXRpYXRpdmUoaW5wdXQsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVyci5tZXNzYWdlKS5lcXVhbCgnRGF0ZUNvbnRyb2w6IHRha2VJbml0aWF0aXZlIGNhbGxlZCBidXQgdGhpcy5pbml0aWF0aXZlRnVuYyBpcyBub3Qgc2V0LiBjYW5UYWtlSW5pdGlhdGl2ZSgpIHNob3VsZCBiZSBjYWxsZWQgZmlyc3QgdG8gc2V0IHRoaXMuaW5pdGlhdGl2ZUZ1bmMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ3Rlc3QgY29udHJvbGxlciBhc2tFbGljaXRhdGlvblF1ZXN0aW9uIHRocm93cyBlcnJvciBmb3IgaW52YWxpZCBhY3Rpb24uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbCA9IGRhdGVDb250cm9sVW5kZXJUZXN0KCk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGVtcHR5SW5wdXQ7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgQ29udHJvbFJlc3VsdEJ1aWxkZXIodW5kZWZpbmVkISk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNvbnRyb2wuYXNrRWxpY2l0YXRpb25RdWVzdGlvbihpbnB1dCwgcmVzdWx0LCAnZGVsZXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KGVyci5tZXNzYWdlKS5lcXVhbCgnVW5oYW5kbGVkLiBVbmtub3duIGVsaWNpdGF0aW9uQWN0aW9uOiBkZWxldGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzdWl0ZSgnRGF0ZUNvbnRyb2wgZTJlIHRlc3RzJywgKCkgPT4ge1xuICAgICAgICB0ZXN0KCdSZXNwb25kIHRvIEFsZXhhXFwncyBxdWVzdGlvbiB3aXRoIHZhbGlkIGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgRGF0ZU1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IHNldCcsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGFjdGlvbjogJC5BY3Rpb24uU2V0IH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBkYXRlPycsXG4gICAgICAgICAgICAgICAgJ1U6IDIwMjAnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiQU1BWk9OLkRBVEVcIjogJzIwMjAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT0suJyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdSZXNwb25kIHRvIEFsZXhhXFwncyBxdWVzdGlvbiB3aXRoIGludmFsaWQgZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBEYXRlTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAxOCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZGF0ZSBiZWNhdXNlIHRoZSBkYXRlIGNhbm5vdCBiZSBsZXNzIHRoYW4gdG9kYXkuIFdoYXQgZGF0ZT8nLFxuICAgICAgICAgICAgICAgICdVOiAyMDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDIwLTAxLTAxJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdSZXNwb25kIHRvIEFsZXhhXFwncyBxdWVzdGlvbiB3aXRoIGludmFsaWQgcGFzdCBkYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyMigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMjAyMScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAyMScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZGF0ZSBiZWNhdXNlIHRoZSBkYXRlIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gdG9kYXkuIFdoYXQgZGF0ZT8nLFxuICAgICAgICAgICAgICAgICdVOiAyMDE4JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDE4JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLicsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnQ2hhbmdlIGRhdGUgd2l0aCB2YWx1ZSBhZnRlciBzZXR0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAyMDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDIwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLicsXG4gICAgICAgICAgICAgICAgJ1U6IGNoYW5nZSBkYXRlIHRvIDIwMjEnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7ICdhY3Rpb24nOiAkLkFjdGlvbi5DaGFuZ2UsICd0YXJnZXQnOiAkLlRhcmdldC5EYXRlLCBcIkFNQVpPTi5EQVRFXCI6ICcyMDIxJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IENoYW5nZWQgZnJvbSAyMDIwIHRvIDIwMjEuJyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdDaGFuZ2UgZGF0ZSB0byBpbnZhbGlkIHZhbHVlIGFmdGVyIHNldHRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgRGF0ZU1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IDIwMjAnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiQU1BWk9OLkRBVEVcIjogJzIwMjAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT0suJyxcbiAgICAgICAgICAgICAgICAnVTogY2hhbmdlIGRhdGUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgJ2FjdGlvbic6ICQuQWN0aW9uLkNoYW5nZSwgJ3RhcmdldCc6ICQuVGFyZ2V0LkRhdGUsIFwiQU1BWk9OLkRBVEVcIjogJzIwMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgYnV0IHRoYXRcXCdzIG5vdCBhIHZhbGlkIGRhdGUgYmVjYXVzZSB0aGUgZGF0ZSBjYW5ub3QgYmUgbGVzcyB0aGFuIHRvZGF5LiBXaGF0IHNob3VsZCBJIGNoYW5nZSBpdCB0bz8nLFxuICAgICAgICAgICAgICAgICdVOiAyMDIxJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyAnYWN0aW9uJzogJC5BY3Rpb24uQ2hhbmdlLCBcIkFNQVpPTi5EQVRFXCI6ICcyMDIxJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IENoYW5nZWQgZnJvbSAyMDE2IHRvIDIwMjEuJyxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdDaGFuZ2UgZGF0ZSBhZnRlciBzZXR0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAyMDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDIwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLicsXG4gICAgICAgICAgICAgICAgJ1U6IGNoYW5nZScsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGFjdGlvbjogJC5BY3Rpb24uQ2hhbmdlIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBzaG91bGQgSSBjaGFuZ2UgaXQgdG8/JyxcbiAgICAgICAgICAgICAgICAnVTogY2hhbmdlIHRvIDIwMjEnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7ICdhY3Rpb24nOiAkLkFjdGlvbi5DaGFuZ2UsIFwiQU1BWk9OLkRBVEVcIjogJzIwMjEnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogQ2hhbmdlZCBmcm9tIDIwMjAgdG8gMjAyMS4nLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ0NoYW5nZSBkYXRlIGFmdGVyIHNldHRpbmcgYW5kIGxhdGVyIHNldCBpdCB0byBhIGRpZmZlcmVudCB2YWx1ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBEYXRlTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMTk5MycsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMTk5MycgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZGF0ZSBiZWNhdXNlIHRoZSBkYXRlIGNhbm5vdCBiZSBsZXNzIHRoYW4gdG9kYXkuIFdoYXQgZGF0ZT8nLFxuICAgICAgICAgICAgICAgICdVOiAyMDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDIwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLicsXG4gICAgICAgICAgICAgICAgJ1U6IGNoYW5nZScsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGFjdGlvbjogJC5BY3Rpb24uQ2hhbmdlIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBzaG91bGQgSSBjaGFuZ2UgaXQgdG8/JyxcbiAgICAgICAgICAgICAgICAnVTogY2hhbmdlIHRvIDIwMjEnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgXCJBTUFaT04uREFURVwiOiAnMjAyMScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBDaGFuZ2VkIGZyb20gMjAyMCB0byAyMDIxLicsXG4gICAgICAgICAgICAgICAgJ1U6IGFjdHVhbGx5IHNldCBpdCB0bycsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7YWN0aW9uOiAkLkFjdGlvbi5TZXR9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdoYXQgZGF0ZT8nLFxuICAgICAgICAgICAgICAgICdVOiAyMDI1JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDI1JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9LLidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdDaGFuZ2UgZGF0ZSB0byBpbnZhbGlkIHZhbHVlIGFmdGVyIHNldHRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgRGF0ZU1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IGNoYW5nZScsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGFjdGlvbjogJC5BY3Rpb24uQ2hhbmdlIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBzaG91bGQgSSBjaGFuZ2UgaXQgdG8/JyxcbiAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAxOCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZGF0ZSBiZWNhdXNlIHRoZSBkYXRlIGNhbm5vdCBiZSBsZXNzIHRoYW4gdG9kYXkuIFdoYXQgc2hvdWxkIEkgY2hhbmdlIGl0IHRvPycsXG4gICAgICAgICAgICAgICAgJ1U6IDIwMjEnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiQU1BWk9OLkRBVEVcIjogJzIwMjEnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogQ2hhbmdlZCBmcm9tIDIwMTggdG8gMjAyMS4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZGF0ZSB2YWxpZCwgbmVlZHMgZXhwbGljaXQgYWZmaXJtaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyV2l0aENvbmZpcm1hdGlvbigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAxOCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAyMDE4PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllYWguJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Llllc0ludGVudCkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZGF0ZSB2YWx1ZSBhZnRlciBkaXNhZmZpcm1hdGlvbiwgcmVxdWlyZXMgcmVxdWVzdCB2YWx1ZSBhY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgRGF0ZU1hbmFnZXJXaXRoQ29uZmlybWF0aW9uKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAyMDE4JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDE4JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDIwMTg/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8uJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Lk5vSW50ZW50KSksXG4gICAgICAgICAgICAgICAgJ0E6IE15IG1pc3Rha2UuIFdoYXQgZGF0ZT8nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZGF0ZSB2YWx1ZSBzZXQgYW5kIGNoYW5naW5nIGl0IHJlcXVpcmVzIHZhbHVlIGNoYW5nZWQgYWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyV2l0aENvbmZpcm1hdGlvbigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAxOCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAyMDE4PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcy4nLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5BZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nLFxuICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgdG8gMDgtMTItMTk5My4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiQU1BWk9OLkRBVEVcIjogJzA4LTEyLTE5OTMnLCBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAwOC0xMi0xOTkzPycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcy4nLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5BZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZGF0ZSB2YWx1ZSBzZXQgYW5kIGNoYW5naW5nIGl0IHRvIGludmFsaWQgcmVxdWlyZXMgY29uZmlybWF0aW9uIGFuZCBjaGVja3MgZm9yIHZhbGlkYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IERhdGVNYW5hZ2VyV2l0aENvbmZpcm1hdGlvbigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgXCJBTUFaT04uREFURVwiOiAnMjAxOCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAyMDE4PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcy4nLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5BZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nLFxuICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgdG8gMjAyMS4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7IFwiQU1BWk9OLkRBVEVcIjogJzIwMjEnLCBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZGF0ZSBiZWNhdXNlIHRoZSBkYXRlIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gdG9kYXkuIFdoYXQgc2hvdWxkIEkgY2hhbmdlIGl0IHRvPycsXG4gICAgICAgICAgICAgICAgJ1U6IDIwMDAuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDAwJ30pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMjAwMD8nLFxuICAgICAgICAgICAgICAgICdVOiBOby4nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuTm9JbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gV2hhdCBkYXRlPycsXG4gICAgICAgICAgICAgICAgJ1U6IDIwMTYuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwgeyBcIkFNQVpPTi5EQVRFXCI6ICcyMDE2J30pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMjAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMuJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Llllc0ludGVudCkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdfQ==