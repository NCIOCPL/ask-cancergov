"use strict";
/*
 * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License').
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the 'license' file accompanying this file. This file is distributed
 * on an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const mocha_1 = require("mocha");
const NumberControl_1 = require("../../src/commonControls/NumberControl");
const Strings_1 = require("../../src/constants/Strings");
const ControlManager_1 = require("../../src/controls/ControlManager");
const AmazonBuiltInSlotType_1 = require("../../src/intents/AmazonBuiltInSlotType");
const GeneralControlIntent_1 = require("../../src/intents/GeneralControlIntent");
const SingleValueControlIntent_1 = require("../../src/intents/SingleValueControlIntent");
const ControlHandler_1 = require("../../src/runtime/ControlHandler");
const TestingUtils_1 = require("../../src/utils/testSupport/TestingUtils");
const IntentUtils_1 = require("../../src/utils/IntentUtils");
const AmazonBuiltInIntent_1 = require("../../src/intents/AmazonBuiltInIntent");
TestingUtils_1.waitForDebugger();
mocha_1.suite('NumberControl e2e tests', () => {
    mocha_1.suite('NumberControl e2e tests - NumberControl without validation nor expectation', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithoutValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    confirmationRequired: true
                });
            }
        }
        mocha_1.test('number valid but without expectation, needs explicit affirming', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: What number?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes.', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
    });
    mocha_1.suite('NumberControl e2e tests - NumberControl with expectation function and validation functions', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithoutValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    prompts: {},
                    validation: [
                        state => (state.value > 0) || { renderedReason: 'the value must be positive' },
                        state => (state.value % 2 === 0) || { renderedReason: 'the value must be even' }
                    ],
                    confirmationRequired: (state, input) => state.value !== undefined && (state.value < 10 || state.value > 20)
                });
            }
        }
        mocha_1.test('first number not valid but expected, second number valid and expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: What number?',
                'U: Fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '15' })),
                'A: Sorry but that\'s not a valid choice because the value must be even. What number?',
                'U: Sixteen.', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Ok. Value set to 16.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
    });
    mocha_1.suite('NumberControl e2e tests - NumberControl with custom validation and expectation', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    prompts: {
                        requestValue: () => ['How many?']
                    },
                    validation: state => (state.value >= 0 && state.value <= 50) || { renderedReason: 'the value must be between zero and fifty inclusive' },
                    confirmationRequired: (state, input) => state.value !== undefined && ![1, 2, 3, 4, 5, 6].includes(state.value),
                });
            }
        }
        mocha_1.test('input number valid and expected, do not need confirmation', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Six', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '6' })),
                'A: Ok. Value set to 6.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('number valid but not expected, needs explicit affirming', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes.', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('overfilling the affirmation', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes, change it to 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Affirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '16' })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('affirmation with a different value, confirm user with the latest number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes, change it to 6', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Affirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '6' })),
                'A: Sorry the previous value is 16, but you confirmed to a different number. Was that 6?',
                'U: Yes.', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('disaffirm with the same value, confirm user with the number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No, change it to 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '16' })),
                'A: Sorry you disagreed but with the same number. How many?',
                'U: Six.', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '6' })),
                'A: Ok. Value set to 6.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('only provide a same value during confirmation, confirm user with the existing number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('only provide a different value during confirmation, confirm user with the new number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Change it to 6', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '6' })),
                'A: Ok. Value set to 6.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('first number strictly disaffirmed, propose user with ambiguous pair based on the first number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '15' })),
                'A: Was that 15?',
                'U: No, fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, 'AMAZON.NUMBER': '15' })),
                'A: Sorry you disagreed but with the same number. Did you perhaps mean 50?',
                'U: Yes', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(50);
        });
        mocha_1.test('first number strictly disaffirmed, but ambiguous pair invalid, request value from user', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No.', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.NoIntent)),
                'A: My mistake. How many?',
                'U: Set to five', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '5' })),
                'A: Ok. Value set to 5.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(5);
        });
        mocha_1.test('first number disaffirmed, second number invalid, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No, sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, 'AMAZON.NUMBER': '16' })),
                'A: Sorry you disagreed but with the same number. How many?',
                'U: One thousand', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '1000' })),
                'A: Sorry but that\'s not a valid choice because the value must be between zero and fifty inclusive. How many?',
                'U: Change to 26', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '26' })),
                'A: Was that 26?',
                'U: Yes', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(26);
        });
        mocha_1.test('first number disaffirmed, ambiguous pair hit but still disaffirmed, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Forty', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '40' })),
                'A: Was that 40?',
                'U: No', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.NoIntent)),
                'A: My mistake. Did you perhaps mean 14?',
                'U: No', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.NoIntent)),
                'A: My mistake. How many?',
                'U: Three', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '3' })),
                'A: Ok. Value set to 3.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(3);
        });
        mocha_1.test('first number disaffirmed, unusable repeated number happens, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.NoIntent)),
                'A: My mistake. How many?',
                'U: Change the number', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change, target: Strings_1.Strings.Target.Number })),
                'A: How many?',
                'U: I want sixteen of them', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: I\'m really sorry but I heard 16 again. How many?',
                'U: Never mind I want 20', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '20' })),
                'A: Was that 20?',
                'U: No', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.NoIntent)),
                'A: My mistake. How many?',
                'U: I want sixteen of them', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: I\'m really sorry but I heard 16 again. How many?',
                'U: Never mind I want 20', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '20' })),
                'A: I\'m really sorry but I heard 20 again. How many?',
                'U: Change to Five', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '5' })),
                'A: Ok. Value set to 5.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(5);
        });
        mocha_1.test('handling special number like negative and zero', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Minus ten.', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '-10' })),
                'A: Sorry but that\'s not a valid choice because the value must be between zero and fifty inclusive. How many?',
                'U: Zero', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '0' })),
                'A: Was that 0?',
                'U: Yes', TestingUtils_1.TestInput.of(IntentUtils_1.IntentBuilder.of(AmazonBuiltInIntent_1.AmazonIntent.YesIntent)),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTnVtYmVyQ29udHJvbC5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdC9jb21tb25Db250cm9sVGVzdHMvTnVtYmVyQ29udHJvbC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRzs7QUFFSCwrQkFBOEI7QUFDOUIsaUNBQW9DO0FBQ3BDLDBFQUEyRjtBQUMzRix5REFBMkQ7QUFFM0Qsc0VBQW1FO0FBQ25FLG1GQUFnRjtBQUNoRixpRkFBOEU7QUFDOUUseUZBQXNGO0FBQ3RGLHFFQUFrRTtBQUNsRSwyRUFBK0Y7QUFDL0YsNkRBQTREO0FBQzVELCtFQUFxRTtBQUVyRSw4QkFBZSxFQUFFLENBQUM7QUFFbEIsYUFBSyxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtJQUNsQyxhQUFLLENBQUMsNEVBQTRFLEVBQUUsR0FBRyxFQUFFO1FBQ3JGLE1BQU0sZUFBZSxHQUFHLDRDQUE0QyxDQUFDO1FBRXJFLE1BQU0sb0JBQXFCLFNBQVEsK0JBQWM7WUFDN0MsaUJBQWlCLENBQUMsS0FBVTtnQkFDeEIsT0FBTyxJQUFJLDZCQUFhLENBQUM7b0JBQ3JCLEVBQUUsRUFBRSxlQUFlO29CQUNuQixvQkFBb0IsRUFBRSxJQUFJO2lCQUM3QixDQUFDLENBQUM7WUFDUCxDQUFDO1NBQ0o7UUFFRCxZQUFJLENBQUMsZ0VBQWdFLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDOUUsTUFBTSxjQUFjLEdBQUcsSUFBSSwrQkFBYyxDQUFDLElBQUksb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1lBQ3RFLE1BQU0sc0JBQU8sQ0FBQyxjQUFjLEVBQUU7Z0JBQzFCLEtBQUssRUFBRSx3QkFBUyxDQUFDLEVBQUUsQ0FBQywyQ0FBb0IsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2hELGlCQUFpQjtnQkFDakIsWUFBWSxFQUFFLHdCQUFTLENBQUMsRUFBRSxDQUFDLG1EQUF3QixDQUFDLEVBQUUs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QUksK0JBQWMsQ0FBQyxJQUFJLG9CQUFvQixFQUFFLENBQUMsQ0FBQztZQUN0RSxNQUFNLHNCQUFPLENBQUMsY0FBYyxFQUFFO2dCQUMxQixlQUFlLEVBQUUsd0JBQVMsQ0FBQyxFQUFFLENBQUMsbURBQXdCLENBQUMsRUFBRSxDQUFDLDZDQUFxQixDQUFDLE1BQU0sRUFBRSxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUNwSCwrR0FBK0c7Z0JBQy9HLFNBQVMsRUFBRSx3QkFBUyxDQUFDLEVBQUUsQ0FBQyxtREFBd0IsQ0FBQyxFQUFFLENBQUMsNkNBQXFCLENBQUMsTUFBTSxFQUFFLEVBQUUsZUFBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzVHLGdCQUFnQjtnQkFDaEIsUUFBUSxFQUFFLHdCQUFTLENBQUMsRUFBRSxDQUFDLDJCQUFhLENBQUMsRUFBRSxDQUFDLGtDQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2hFLFdBQVc7YUFDZCxDQUFDLENBQUM7WUFDSCxhQUFNLENBQUUsY0FBYyxDQUFDLDRCQUE0QixFQUFFLENBQUMsZUFBZSxDQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjAgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpLlxuICogWW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogQSBjb3B5IG9mIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXRcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogb3IgaW4gdGhlICdsaWNlbnNlJyBmaWxlIGFjY29tcGFueWluZyB0aGlzIGZpbGUuIFRoaXMgZmlsZSBpcyBkaXN0cmlidXRlZFxuICogb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmdcbiAqIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCB7IHN1aXRlLCB0ZXN0IH0gZnJvbSAnbW9jaGEnO1xuaW1wb3J0IHsgTnVtYmVyQ29udHJvbCwgTnVtYmVyQ29udHJvbFN0YXRlIH0gZnJvbSAnLi4vLi4vc3JjL2NvbW1vbkNvbnRyb2xzL051bWJlckNvbnRyb2wnO1xuaW1wb3J0IHsgU3RyaW5ncyBhcyAkIH0gZnJvbSBcIi4uLy4uL3NyYy9jb25zdGFudHMvU3RyaW5nc1wiO1xuaW1wb3J0IHsgQ29udHJvbCB9IGZyb20gJy4uLy4uL3NyYy9jb250cm9scy9Db250cm9sJztcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRyb2xzL0NvbnRyb2xNYW5hZ2VyJztcbmltcG9ydCB7IEFtYXpvbkJ1aWx0SW5TbG90VHlwZSB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL0FtYXpvbkJ1aWx0SW5TbG90VHlwZSc7XG5pbXBvcnQgeyBHZW5lcmFsQ29udHJvbEludGVudCB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL0dlbmVyYWxDb250cm9sSW50ZW50JztcbmltcG9ydCB7IFNpbmdsZVZhbHVlQ29udHJvbEludGVudCB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL1NpbmdsZVZhbHVlQ29udHJvbEludGVudCc7XG5pbXBvcnQgeyBDb250cm9sSGFuZGxlciB9IGZyb20gJy4uLy4uL3NyYy9ydW50aW1lL0NvbnRyb2xIYW5kbGVyJztcbmltcG9ydCB7IHRlc3RFMkUsIFRlc3RJbnB1dCwgd2FpdEZvckRlYnVnZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3Rlc3RTdXBwb3J0L1Rlc3RpbmdVdGlscyc7XG5pbXBvcnQgeyBJbnRlbnRCdWlsZGVyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL0ludGVudFV0aWxzJztcbmltcG9ydCB7IEFtYXpvbkludGVudCB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL0FtYXpvbkJ1aWx0SW5JbnRlbnQnO1xuXG53YWl0Rm9yRGVidWdnZXIoKTtcblxuc3VpdGUoJ051bWJlckNvbnRyb2wgZTJlIHRlc3RzJywgKCkgPT4ge1xuICAgIHN1aXRlKCdOdW1iZXJDb250cm9sIGUyZSB0ZXN0cyAtIE51bWJlckNvbnRyb2wgd2l0aG91dCB2YWxpZGF0aW9uIG5vciBleHBlY3RhdGlvbicsICgpID0+IHtcbiAgICAgICAgY29uc3QgVEVTVF9DT05UUk9MX0lEID0gJ051bWJlclNlbGVjdG9yV2l0aG91dFZhbGlkYXRpb25FeHBlY3RhdGlvbic7XG5cbiAgICAgICAgY2xhc3MgTnVtYmVyQ29udHJvbE1hbmFnZXIgZXh0ZW5kcyBDb250cm9sTWFuYWdlciB7XG4gICAgICAgICAgICBjcmVhdGVDb250cm9sVHJlZShzdGF0ZTogYW55KTogQ29udHJvbCB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJDb250cm9sKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFRFU1RfQ09OVFJPTF9JRCxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uUmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRlc3QoJ251bWJlciB2YWxpZCBidXQgd2l0aG91dCBleHBlY3RhdGlvbiwgbmVlZHMgZXhwbGljaXQgYWZmaXJtaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe30pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBudW1iZXI/JyxcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMuJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Llllc0ludGVudCkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN1aXRlKCdOdW1iZXJDb250cm9sIGUyZSB0ZXN0cyAtIE51bWJlckNvbnRyb2wgd2l0aCBleHBlY3RhdGlvbiBmdW5jdGlvbiBhbmQgdmFsaWRhdGlvbiBmdW5jdGlvbnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRFU1RfQ09OVFJPTF9JRCA9ICdOdW1iZXJTZWxlY3RvcldpdGhvdXRWYWxpZGF0aW9uRXhwZWN0YXRpb24nO1xuXG4gICAgICAgIGNsYXNzIE51bWJlckNvbnRyb2xNYW5hZ2VyIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgICAgICAgICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBURVNUX0NPTlRST0xfSUQsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhID4gMCkgfHwgeyByZW5kZXJlZFJlYXNvbjogJ3RoZSB2YWx1ZSBtdXN0IGJlIHBvc2l0aXZlJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhICUgMiA9PT0gMCkgfHwgeyByZW5kZXJlZFJlYXNvbjogJ3RoZSB2YWx1ZSBtdXN0IGJlIGV2ZW4nfVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25SZXF1aXJlZDogKHN0YXRlLCBpbnB1dCkgPT4gc3RhdGUudmFsdWUgIT09IHVuZGVmaW5lZCAmJiAoc3RhdGUudmFsdWUgPCAxMCB8fCBzdGF0ZS52YWx1ZSA+IDIwKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIG5vdCB2YWxpZCBidXQgZXhwZWN0ZWQsIHNlY29uZCBudW1iZXIgdmFsaWQgYW5kIGV4cGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe30pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBudW1iZXI/JyxcbiAgICAgICAgICAgICAgICAnVTogRmlmdGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICcxNScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgY2hvaWNlIGJlY2F1c2UgdGhlIHZhbHVlIG11c3QgYmUgZXZlbi4gV2hhdCBudW1iZXI/JyxcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbi4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byAxNi4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN1aXRlKCdOdW1iZXJDb250cm9sIGUyZSB0ZXN0cyAtIE51bWJlckNvbnRyb2wgd2l0aCBjdXN0b20gdmFsaWRhdGlvbiBhbmQgZXhwZWN0YXRpb24nLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRFU1RfQ09OVFJPTF9JRCA9ICdOdW1iZXJTZWxlY3RvcldpdGhWYWxpZGF0aW9uRXhwZWN0YXRpb24nO1xuXG4gICAgICAgIGNsYXNzIE51bWJlckNvbnRyb2xNYW5hZ2VyIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgICAgICAgICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBURVNUX0NPTlRST0xfSUQsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RWYWx1ZTogKCkgPT4gWydIb3cgbWFueT8nXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhID49IDAgJiYgc3RhdGUudmFsdWUhIDw9IDUwKSB8fCB7IHJlbmRlcmVkUmVhc29uOiAndGhlIHZhbHVlIG11c3QgYmUgYmV0d2VlbiB6ZXJvIGFuZCBmaWZ0eSBpbmNsdXNpdmUnfSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uUmVxdWlyZWQ6IChzdGF0ZSwgaW5wdXQpID0+IHN0YXRlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgIVsxLCAyLCAzLCA0LCA1LCA2XS5pbmNsdWRlcyhzdGF0ZS52YWx1ZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0ZXN0KCdpbnB1dCBudW1iZXIgdmFsaWQgYW5kIGV4cGVjdGVkLCBkbyBub3QgbmVlZCBjb25maXJtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA2LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnbnVtYmVyIHZhbGlkIGJ1dCBub3QgZXhwZWN0ZWQsIG5lZWRzIGV4cGxpY2l0IGFmZmlybWluZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHt9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMTY/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzLicsIFRlc3RJbnB1dC5vZihJbnRlbnRCdWlsZGVyLm9mKEFtYXpvbkludGVudC5ZZXNJbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogR3JlYXQuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDE2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnb3ZlcmZpbGxpbmcgdGhlIGFmZmlybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiBTaXh0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLlNldCwgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMTY/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzLCBjaGFuZ2UgaXQgdG8gMTYnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJmZWVkYmFja1wiOiAkLkZlZWRiYWNrLkFmZmlybSwgXCJhY3Rpb25cIjogJC5BY3Rpb24uQ2hhbmdlLCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdhZmZpcm1hdGlvbiB3aXRoIGEgZGlmZmVyZW50IHZhbHVlLCBjb25maXJtIHVzZXIgd2l0aCB0aGUgbGF0ZXN0IG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcywgY2hhbmdlIGl0IHRvIDYnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJmZWVkYmFja1wiOiAkLkZlZWRiYWNrLkFmZmlybSwgXCJhY3Rpb25cIjogJC5BY3Rpb24uQ2hhbmdlLCAnQU1BWk9OLk5VTUJFUic6ICc2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFNvcnJ5IHRoZSBwcmV2aW91cyB2YWx1ZSBpcyAxNiwgYnV0IHlvdSBjb25maXJtZWQgdG8gYSBkaWZmZXJlbnQgbnVtYmVyLiBXYXMgdGhhdCA2PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcy4nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuWWVzSW50ZW50KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZGlzYWZmaXJtIHdpdGggdGhlIHNhbWUgdmFsdWUsIGNvbmZpcm0gdXNlciB3aXRoIHRoZSBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBObywgY2hhbmdlIGl0IHRvIDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiZmVlZGJhY2tcIjogJC5GZWVkYmFjay5EaXNhZmZpcm0sIFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgeW91IGRpc2FncmVlZCBidXQgd2l0aCB0aGUgc2FtZSBudW1iZXIuIEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IFNpeC4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBPay4gVmFsdWUgc2V0IHRvIDYuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdvbmx5IHByb3ZpZGUgYSBzYW1lIHZhbHVlIGR1cmluZyBjb25maXJtYXRpb24sIGNvbmZpcm0gdXNlciB3aXRoIHRoZSBleGlzdGluZyBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiAxNicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdvbmx5IHByb3ZpZGUgYSBkaWZmZXJlbnQgdmFsdWUgZHVyaW5nIGNvbmZpcm1hdGlvbiwgY29uZmlybSB1c2VyIHdpdGggdGhlIG5ldyBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgaXQgdG8gNicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UsICdBTUFaT04uTlVNQkVSJzogJzYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA2LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIHN0cmljdGx5IGRpc2FmZmlybWVkLCBwcm9wb3NlIHVzZXIgd2l0aCBhbWJpZ3VvdXMgcGFpciBiYXNlZCBvbiB0aGUgZmlyc3QgbnVtYmVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiBGaWZ0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLlNldCwgJ0FNQVpPTi5OVU1CRVInOiAnMTUnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMTU/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8sIGZpZnRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJmZWVkYmFja1wiOiAkLkZlZWRiYWNrLkRpc2FmZmlybSwgJ0FNQVpPTi5OVU1CRVInOiAnMTUnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgeW91IGRpc2FncmVlZCBidXQgd2l0aCB0aGUgc2FtZSBudW1iZXIuIERpZCB5b3UgcGVyaGFwcyBtZWFuIDUwPycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcycsIFRlc3RJbnB1dC5vZihJbnRlbnRCdWlsZGVyLm9mKEFtYXpvbkludGVudC5ZZXNJbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogR3JlYXQuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDUwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIHN0cmljdGx5IGRpc2FmZmlybWVkLCBidXQgYW1iaWd1b3VzIHBhaXIgaW52YWxpZCwgcmVxdWVzdCB2YWx1ZSBmcm9tIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBOby4nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuTm9JbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogU2V0IHRvIGZpdmUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICc1JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE9rLiBWYWx1ZSBzZXQgdG8gNS4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoNSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ2ZpcnN0IG51bWJlciBkaXNhZmZpcm1lZCwgc2Vjb25kIG51bWJlciBpbnZhbGlkLCB0aGlyZCBudW1iZXIgZXhwZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6ICcsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7fSkpLFxuICAgICAgICAgICAgICAgICdBOiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBTaXh0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLlNldCwgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMTY/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8sIHNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJmZWVkYmFja1wiOiAkLkZlZWRiYWNrLkRpc2FmZmlybSwgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgeW91IGRpc2FncmVlZCBidXQgd2l0aCB0aGUgc2FtZSBudW1iZXIuIEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IE9uZSB0aG91c2FuZCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICcxMDAwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFNvcnJ5IGJ1dCB0aGF0XFwncyBub3QgYSB2YWxpZCBjaG9pY2UgYmVjYXVzZSB0aGUgdmFsdWUgbXVzdCBiZSBiZXR3ZWVuIHplcm8gYW5kIGZpZnR5IGluY2x1c2l2ZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogQ2hhbmdlIHRvIDI2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgJ0FNQVpPTi5OVU1CRVInOiAnMjYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMjY/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Llllc0ludGVudCkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMjYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdmaXJzdCBudW1iZXIgZGlzYWZmaXJtZWQsIGFtYmlndW91cyBwYWlyIGhpdCBidXQgc3RpbGwgZGlzYWZmaXJtZWQsIHRoaXJkIG51bWJlciBleHBlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHt9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IEZvcnR5JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLlNldCwgJ0FNQVpPTi5OVU1CRVInOiAnNDAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgNDA/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuTm9JbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gRGlkIHlvdSBwZXJoYXBzIG1lYW4gMTQ/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuTm9JbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogVGhyZWUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMycgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBPay4gVmFsdWUgc2V0IHRvIDMuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDMpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdmaXJzdCBudW1iZXIgZGlzYWZmaXJtZWQsIHVudXNhYmxlIHJlcGVhdGVkIG51bWJlciBoYXBwZW5zLCB0aGlyZCBudW1iZXIgZXhwZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6ICcsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7fSkpLFxuICAgICAgICAgICAgICAgICdBOiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBTaXh0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IE5vJywgVGVzdElucHV0Lm9mKEludGVudEJ1aWxkZXIub2YoQW1hem9uSW50ZW50Lk5vSW50ZW50KSksXG4gICAgICAgICAgICAgICAgJ0E6IE15IG1pc3Rha2UuIEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IENoYW5nZSB0aGUgbnVtYmVyJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgYWN0aW9uOiAkLkFjdGlvbi5DaGFuZ2UsIHRhcmdldDogJC5UYXJnZXQuTnVtYmVyIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogSSB3YW50IHNpeHRlZW4gb2YgdGhlbScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IElcXCdtIHJlYWxseSBzb3JyeSBidXQgSSBoZWFyZCAxNiBhZ2Fpbi4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogTmV2ZXIgbWluZCBJIHdhbnQgMjAnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMjAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMjA/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8nLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuTm9JbnRlbnQpKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogSSB3YW50IHNpeHRlZW4gb2YgdGhlbScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IElcXCdtIHJlYWxseSBzb3JyeSBidXQgSSBoZWFyZCAxNiBhZ2Fpbi4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogTmV2ZXIgbWluZCBJIHdhbnQgMjAnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMjAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogSVxcJ20gcmVhbGx5IHNvcnJ5IGJ1dCBJIGhlYXJkIDIwIGFnYWluLiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgdG8gRml2ZScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UsICdBTUFaT04uTlVNQkVSJzogJzUnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA1LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg1KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnaGFuZGxpbmcgc3BlY2lhbCBudW1iZXIgbGlrZSBuZWdhdGl2ZSBhbmQgemVybycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogTWludXMgdGVuLicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICctMTAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgYnV0IHRoYXRcXCdzIG5vdCBhIHZhbGlkIGNob2ljZSBiZWNhdXNlIHRoZSB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gemVybyBhbmQgZmlmdHkgaW5jbHVzaXZlLiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBaZXJvJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMD8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMnLCBUZXN0SW5wdXQub2YoSW50ZW50QnVpbGRlci5vZihBbWF6b25JbnRlbnQuWWVzSW50ZW50KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSgwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTtcbiJdfQ==