"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DateRangeControlIntent = exports.validateControlInput = exports.hasOneOrMoreValues = exports.hasOneOrMoreActions = exports.hasOneOrMoreTargets = exports.unpackDateRangeControlIntent = void 0;
const ModelTypes_1 = require("../interactionModelGeneration/ModelTypes");
const IntentUtils_1 = require("../utils/IntentUtils");
const AmazonBuiltInSlotType_1 = require("./AmazonBuiltInSlotType");
const BaseControlIntent_1 = require("./BaseControlIntent");
/**
 * Unpacks the complete intent object into a simpler representation.
 *
 * Note re "empty slots":
 * - Slots in the intent with no value appear in the intent object as "".
 *   However, these are unpacked as **`undefined`** to be more explicit and ease
 *   the implementation of predicates.
 * @param intent - Intent
 */
function unpackDateRangeControlIntent(intent) {
    if (!intent.name.startsWith('DateRangeControlIntent')) {
        throw new Error(`Not an DateRangeControlIntent: ${intent.name}`);
    }
    let feedback;
    let action;
    let target;
    let amazonDate;
    let actionA;
    let targetA;
    let amazonDateA;
    let actionB;
    let targetB;
    let amazonDateB;
    for (const [name, slot] of Object.entries(intent.slots)) {
        const slotObject = IntentUtils_1.getSlotResolutions(slot);
        const slotValue = slotObject ? slotObject.slotValue : undefined;
        switch (name) {
            case 'feedback':
                feedback = slotValue;
                break;
            case 'action':
                action = slotValue;
                break;
            case 'target':
                target = slotValue;
                break;
            case 'AMAZON.DATE': {
                amazonDate = slotValue;
                break;
            }
            case 'action.a':
                actionA = slotValue;
                break;
            case 'target.a':
                targetA = slotValue;
                break;
            case 'AMAZON.DATE.a': {
                amazonDateA = slotValue;
                break;
            }
            case 'action.b':
                actionB = slotValue;
                break;
            case 'target.b':
                targetB = slotValue;
                break;
            case 'AMAZON.DATE.b': {
                amazonDateB = slotValue;
                break;
            }
            case 'head': break;
            case 'tail': break;
            case 'conjunction': break;
            case 'preposition.a': break;
            case 'preposition.b': break;
            default: break;
        }
    }
    return {
        feedback,
        action,
        target,
        'AMAZON.DATE': amazonDate,
        'action.a': actionA,
        'target.a': targetA,
        'AMAZON.DATE.a': amazonDateA,
        'action.b': actionB,
        'target.b': targetB,
        'AMAZON.DATE.b': amazonDateB
    };
}
exports.unpackDateRangeControlIntent = unpackDateRangeControlIntent;
function hasOneOrMoreTargets(input) {
    if (!input) {
        return false;
    }
    if (input.target !== undefined || (input['target.a'] !== undefined && input['target.b'] !== undefined)) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreTargets = hasOneOrMoreTargets;
function hasOneOrMoreActions(input) {
    if (!input) {
        return false;
    }
    if (input['action.a'] !== undefined || input['action.b'] !== undefined || input.action !== undefined) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreActions = hasOneOrMoreActions;
function hasOneOrMoreValues(input) {
    if (!input) {
        return false;
    }
    if (input['AMAZON.DATE.a'] !== undefined || input['AMAZON.DATE.b'] !== undefined || input['AMAZON.DATE'] !== undefined) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreValues = hasOneOrMoreValues;
function validateControlInput(input) {
    if (!input) {
        return false;
    }
    // priorityRule, when action / target / Amazon.Date exist, no actionA, actionB, no targetA, targetB, no Amazon.Date.a, Amazon.Date.b
    if (input.action !== undefined) {
        if (input["action.a"] !== undefined || input["action.b"] !== undefined) {
            return false;
        }
    }
    if (input.target !== undefined) {
        if (input['target.a'] !== undefined || input['target.b'] !== undefined) {
            return false;
        }
    }
    if (input['AMAZON.DATE'] !== undefined) {
        if (input['AMAZON.DATE.a'] !== undefined || input['AMAZON.DATE.b'] !== undefined) {
            return false;
        }
        if (!(input['target.a'] !== undefined && input['target.b'] !== undefined)) {
            return false;
        }
    }
    // pairRule, if .a exist, then .b must exist. Vice versa
    if ((input['action.a'] !== undefined && input['action.b'] === undefined) || (input['action.b'] !== undefined && input['action.a'] === undefined)) {
        return false;
    }
    if ((input['target.a'] !== undefined && input['target.b'] === undefined) || (input['target.b'] !== undefined && input['target.a'] === undefined)) {
        return false;
    }
    if ((input['AMAZON.DATE.a'] !== undefined && input['AMAZON.DATE.b'] === undefined) || (input['AMAZON.DATE.b'] !== undefined && input['AMAZON.DATE.a'] === undefined)) {
        return false;
    }
    // For DateRangeControlIntent, value must exist
    if (input['AMAZON.DATE'] === undefined && input['AMAZON.DATE.a'] === undefined) {
        return false;
    }
    return true;
}
exports.validateControlInput = validateControlInput;
/**
 * Intent that conveys feedback, action, target and two AMAZON.DATE values.
 */
class DateRangeControlIntent extends BaseControlIntent_1.BaseControlIntent {
    /**
     * Create Intent from specification of the slots
     */
    static of(slots) {
        return IntentUtils_1.IntentBuilder.of(this.prototype.constructor.name, slots);
    }
    // tsDoc: see BaseControlIntent
    generateIntent() {
        return {
            name: this.name,
            slots: this.generateSlots(),
            samples: [],
        };
    }
    generateSlots() {
        const slots = [
            {
                name: 'feedback',
                type: ModelTypes_1.SharedSlotType.FEEDBACK
            },
            {
                name: 'action',
                type: ModelTypes_1.SharedSlotType.ACTION
            },
            {
                name: 'target',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'preposition.a',
                type: ModelTypes_1.SharedSlotType.PREPOSITION
            },
            {
                name: 'preposition.b',
                type: ModelTypes_1.SharedSlotType.PREPOSITION
            },
            {
                name: 'conjunction',
                type: ModelTypes_1.SharedSlotType.CONJUNCTION
            },
            {
                name: 'target.a',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'AMAZON.DATE.a',
                type: AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.DATE
            },
            {
                name: 'target.b',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'AMAZON.DATE.b',
                type: AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.DATE
            },
            {
                name: 'head',
                type: ModelTypes_1.SharedSlotType.HEAD
            },
            {
                name: 'tail',
                type: ModelTypes_1.SharedSlotType.TAIL
            }
        ];
        return slots;
    }
}
exports.DateRangeControlIntent = DateRangeControlIntent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZVJhbmdlQ29udHJvbEludGVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9pbnRlbnRzL0RhdGVSYW5nZUNvbnRyb2xJbnRlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBY0EseUVBQTBFO0FBQzFFLHNEQUF5RTtBQUN6RSxtRUFBZ0U7QUFDaEUsMkRBQXdEO0FBa0J4RDs7Ozs7Ozs7R0FRRztBQUNILFNBQWdCLDRCQUE0QixDQUFDLE1BQWM7SUFDdkQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLHdCQUF3QixDQUFDLEVBQUU7UUFDbkQsTUFBTSxJQUFJLEtBQUssQ0FBQyxrQ0FBa0MsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7S0FDcEU7SUFFRCxJQUFJLFFBQTRCLENBQUM7SUFDakMsSUFBSSxNQUEwQixDQUFDO0lBQy9CLElBQUksTUFBMEIsQ0FBQztJQUMvQixJQUFJLFVBQThCLENBQUM7SUFDbkMsSUFBSSxPQUEyQixDQUFDO0lBQ2hDLElBQUksT0FBMkIsQ0FBQztJQUNoQyxJQUFJLFdBQStCLENBQUM7SUFDcEMsSUFBSSxPQUEyQixDQUFDO0lBQ2hDLElBQUksT0FBMkIsQ0FBQztJQUNoQyxJQUFJLFdBQStCLENBQUM7SUFDcEMsS0FBSyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQU0sQ0FBQyxFQUFFO1FBQ3RELE1BQU0sVUFBVSxHQUFHLGdDQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVDLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBRWhFLFFBQVEsSUFBSSxFQUFFO1lBQ1YsS0FBSyxVQUFVO2dCQUFFLFFBQVEsR0FBRyxTQUFTLENBQUM7Z0JBQUMsTUFBTTtZQUM3QyxL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QUFJLEVBQUUsUUFBUTtnQkFDZCxJQUFJLEVBQUUsMkJBQWMsQ0FBQyxNQUFNO2FBQzlCO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsSUFBSSxFQUFFLDJCQUFjLENBQUMsTUFBTTthQUM5QjtZQUNEO2dCQUNJLElBQUksRUFBRSxlQUFlO2dCQUNyQixJQUFJLEVBQUUsMkJBQWMsQ0FBQyxXQUFXO2FBQ25DO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLGVBQWU7Z0JBQ3JCLElBQUksRUFBRSwyQkFBYyxDQUFDLFdBQVc7YUFDbkM7WUFDRDtnQkFDSSxJQUFJLEVBQUUsYUFBYTtnQkFDbkIsSUFBSSxFQUFFLDJCQUFjLENBQUMsV0FBVzthQUNuQztZQUNEO2dCQUNJLElBQUksRUFBRSxVQUFVO2dCQUNoQixJQUFJLEVBQUUsMkJBQWMsQ0FBQyxNQUFNO2FBQzlCO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLGVBQWU7Z0JBQ3JCLElBQUksRUFBRSw2Q0FBcUIsQ0FBQyxJQUFJO2FBQ25DO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLFVBQVU7Z0JBQ2hCLElBQUksRUFBRSwyQkFBYyxDQUFDLE1BQU07YUFDOUI7WUFDRDtnQkFDSSxJQUFJLEVBQUUsZUFBZTtnQkFDckIsSUFBSSxFQUFFLDZDQUFxQixDQUFDLElBQUk7YUFDbkM7WUFDRDtnQkFDSSxJQUFJLEVBQUUsTUFBTTtnQkFDWixJQUFJLEVBQUUsMkJBQWMsQ0FBQyxJQUFJO2FBQzVCO1lBQ0Q7Z0JBQ0ksSUFBSSxFQUFFLE1BQU07Z0JBQ1osSUFBSSxFQUFFLDJCQUFjLENBQUMsSUFBSTthQUM1QjtTQUNKLENBQUM7UUFFRixPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0NBQ0o7QUF4RUQsd0RBd0VDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAyMDIwIEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpLlxuICogWW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogQSBjb3B5IG9mIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXRcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogb3IgaW4gdGhlIFwibGljZW5zZVwiIGZpbGUgYWNjb21wYW55aW5nIHRoaXMgZmlsZS4gVGhpcyBmaWxlIGlzIGRpc3RyaWJ1dGVkXG4gKiBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXJcbiAqIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nXG4gKiBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEludGVudCB9IGZyb20gXCJhc2stc2RrLW1vZGVsXCI7XG5pbXBvcnQgeyB2MSB9IGZyb20gJ2Fzay1zbWFwaS1tb2RlbCc7XG5pbXBvcnQgeyBTaGFyZWRTbG90VHlwZSB9IGZyb20gJy4uL2ludGVyYWN0aW9uTW9kZWxHZW5lcmF0aW9uL01vZGVsVHlwZXMnO1xuaW1wb3J0IHsgZ2V0U2xvdFJlc29sdXRpb25zLCBJbnRlbnRCdWlsZGVyIH0gZnJvbSAnLi4vdXRpbHMvSW50ZW50VXRpbHMnO1xuaW1wb3J0IHsgQW1hem9uQnVpbHRJblNsb3RUeXBlIH0gZnJvbSAnLi9BbWF6b25CdWlsdEluU2xvdFR5cGUnO1xuaW1wb3J0IHsgQmFzZUNvbnRyb2xJbnRlbnQgfSBmcm9tICcuL0Jhc2VDb250cm9sSW50ZW50JztcblxuLyoqXG4gKiBTbG90IHZhbHVlcyBjb252ZXllZCBieSBhIERhdGVSYW5nZUNvbnRyb2xJbnRlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMge1xuICAgIGZlZWRiYWNrPzogc3RyaW5nLFxuICAgIGFjdGlvbj86IHN0cmluZyxcbiAgICB0YXJnZXQ/OiBzdHJpbmcsXG4gICAgJ0FNQVpPTi5EQVRFJz86IHN0cmluZyxcbiAgICAnYWN0aW9uLmEnPzogc3RyaW5nLFxuICAgICd0YXJnZXQuYSc/OiBzdHJpbmcsXG4gICAgJ0FNQVpPTi5EQVRFLmEnPzogc3RyaW5nLFxuICAgICdhY3Rpb24uYic/OiBzdHJpbmcsXG4gICAgJ3RhcmdldC5iJz86IHN0cmluZyxcbiAgICAnQU1BWk9OLkRBVEUuYic/OiBzdHJpbmdcbn1cblxuLyoqXG4gKiBVbnBhY2tzIHRoZSBjb21wbGV0ZSBpbnRlbnQgb2JqZWN0IGludG8gYSBzaW1wbGVyIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIE5vdGUgcmUgXCJlbXB0eSBzbG90c1wiOlxuICogLSBTbG90cyBpbiB0aGUgaW50ZW50IHdpdGggbm8gdmFsdWUgYXBwZWFyIGluIHRoZSBpbnRlbnQgb2JqZWN0IGFzIFwiXCIuXG4gKiAgIEhvd2V2ZXIsIHRoZXNlIGFyZSB1bnBhY2tlZCBhcyAqKmB1bmRlZmluZWRgKiogdG8gYmUgbW9yZSBleHBsaWNpdCBhbmQgZWFzZVxuICogICB0aGUgaW1wbGVtZW50YXRpb24gb2YgcHJlZGljYXRlcy5cbiAqIEBwYXJhbSBpbnRlbnQgLSBJbnRlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVucGFja0RhdGVSYW5nZUNvbnRyb2xJbnRlbnQoaW50ZW50OiBJbnRlbnQpOiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMge1xuICAgIGlmICghaW50ZW50Lm5hbWUuc3RhcnRzV2l0aCgnRGF0ZVJhbmdlQ29udHJvbEludGVudCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGFuIERhdGVSYW5nZUNvbnRyb2xJbnRlbnQ6ICR7aW50ZW50Lm5hbWV9YCk7XG4gICAgfVxuXG4gICAgbGV0IGZlZWRiYWNrOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGFjdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCB0YXJnZXQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYW1hem9uRGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCBhY3Rpb25BOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHRhcmdldEE6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYW1hem9uRGF0ZUE6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYWN0aW9uQjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCB0YXJnZXRCOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGFtYXpvbkRhdGVCOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgc2xvdF0gb2YgT2JqZWN0LmVudHJpZXMoaW50ZW50LnNsb3RzISkpIHtcbiAgICAgICAgY29uc3Qgc2xvdE9iamVjdCA9IGdldFNsb3RSZXNvbHV0aW9ucyhzbG90KTtcbiAgICAgICAgY29uc3Qgc2xvdFZhbHVlID0gc2xvdE9iamVjdCA/IHNsb3RPYmplY3Quc2xvdFZhbHVlIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnZmVlZGJhY2snOiBmZWVkYmFjayA9IHNsb3RWYWx1ZTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24nOiBhY3Rpb24gPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0JzogdGFyZ2V0ID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFJzoge1xuICAgICAgICAgICAgICAgIGFtYXpvbkRhdGUgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24uYSc6IGFjdGlvbkEgPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0LmEnOiB0YXJnZXRBID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFLmEnOiB7XG4gICAgICAgICAgICAgICAgYW1hem9uRGF0ZUEgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24uYic6IGFjdGlvbkIgPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0LmInOiB0YXJnZXRCID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFLmInOiB7XG4gICAgICAgICAgICAgICAgYW1hem9uRGF0ZUIgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdoZWFkJzogYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YWlsJzogYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjb25qdW5jdGlvbic6IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncHJlcG9zaXRpb24uYSc6IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncHJlcG9zaXRpb24uYic6IGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBmZWVkYmFjayxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgICdBTUFaT04uREFURSc6IGFtYXpvbkRhdGUsXG4gICAgICAgICdhY3Rpb24uYSc6IGFjdGlvbkEsXG4gICAgICAgICd0YXJnZXQuYSc6IHRhcmdldEEsXG4gICAgICAgICdBTUFaT04uREFURS5hJzogYW1hem9uRGF0ZUEsXG4gICAgICAgICdhY3Rpb24uYic6IGFjdGlvbkIsXG4gICAgICAgICd0YXJnZXQuYic6IHRhcmdldEIsXG4gICAgICAgICdBTUFaT04uREFURS5iJzogYW1hem9uRGF0ZUJcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT25lT3JNb3JlVGFyZ2V0cyhpbnB1dDogRGF0ZVJhbmdlQ29udHJvbEludGVudFNsb3RzIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQudGFyZ2V0ICE9PSB1bmRlZmluZWQgfHwgKGlucHV0Wyd0YXJnZXQuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ3RhcmdldC5iJ10gIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc09uZU9yTW9yZUFjdGlvbnMoaW5wdXQ6IERhdGVSYW5nZUNvbnRyb2xJbnRlbnRTbG90cyB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0WydhY3Rpb24uYSddICE9PSB1bmRlZmluZWQgfHwgaW5wdXRbJ2FjdGlvbi5iJ10gIT09IHVuZGVmaW5lZCB8fCBpbnB1dC5hY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT25lT3JNb3JlVmFsdWVzKGlucHV0OiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dFsnQU1BWk9OLkRBVEUuYSddICE9PSB1bmRlZmluZWQgfHwgaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0WydBTUFaT04uREFURSddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ29udHJvbElucHV0KGlucHV0OiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHByaW9yaXR5UnVsZSwgd2hlbiBhY3Rpb24gLyB0YXJnZXQgLyBBbWF6b24uRGF0ZSBleGlzdCwgbm8gYWN0aW9uQSwgYWN0aW9uQiwgbm8gdGFyZ2V0QSwgdGFyZ2V0Qiwgbm8gQW1hem9uLkRhdGUuYSwgQW1hem9uLkRhdGUuYlxuICAgIGlmIChpbnB1dC5hY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbXCJhY3Rpb24uYVwiXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0W1wiYWN0aW9uLmJcIl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnB1dC50YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbJ3RhcmdldC5hJ10gIT09IHVuZGVmaW5lZCB8fCBpbnB1dFsndGFyZ2V0LmInXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5wdXRbJ0FNQVpPTi5EQVRFJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbJ0FNQVpPTi5EQVRFLmEnXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0WydBTUFaT04uREFURS5iJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGlucHV0Wyd0YXJnZXQuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ3RhcmdldC5iJ10gIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHBhaXJSdWxlLCBpZiAuYSBleGlzdCwgdGhlbiAuYiBtdXN0IGV4aXN0LiBWaWNlIHZlcnNhXG4gICAgaWYgKChpbnB1dFsnYWN0aW9uLmEnXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydhY3Rpb24uYiddID09PSB1bmRlZmluZWQpIHx8IChpbnB1dFsnYWN0aW9uLmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydhY3Rpb24uYSddID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChpbnB1dFsndGFyZ2V0LmEnXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0Wyd0YXJnZXQuYiddID09PSB1bmRlZmluZWQpIHx8IChpbnB1dFsndGFyZ2V0LmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0Wyd0YXJnZXQuYSddID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChpbnB1dFsnQU1BWk9OLkRBVEUuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSA9PT0gdW5kZWZpbmVkKSB8fCAoaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydBTUFaT04uREFURS5hJ10gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEZvciBEYXRlUmFuZ2VDb250cm9sSW50ZW50LCB2YWx1ZSBtdXN0IGV4aXN0XG4gICAgaWYgKGlucHV0WydBTUFaT04uREFURSddID09PSB1bmRlZmluZWQgJiYgaW5wdXRbJ0FNQVpPTi5EQVRFLmEnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogSW50ZW50IHRoYXQgY29udmV5cyBmZWVkYmFjaywgYWN0aW9uLCB0YXJnZXQgYW5kIHR3byBBTUFaT04uREFURSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRlUmFuZ2VDb250cm9sSW50ZW50IGV4dGVuZHMgQmFzZUNvbnRyb2xJbnRlbnQge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIEludGVudCBmcm9tIHNwZWNpZmljYXRpb24gb2YgdGhlIHNsb3RzXG4gICAgICovXG4gICAgc3RhdGljIG9mKHNsb3RzOiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMpOiBJbnRlbnQge1xuICAgICAgICByZXR1cm4gSW50ZW50QnVpbGRlci5vZih0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lLCBzbG90cyk7XG4gICAgfVxuXG4gICAgLy8gdHNEb2M6IHNlZSBCYXNlQ29udHJvbEludGVudFxuICAgIGdlbmVyYXRlSW50ZW50KCk6IHYxLnNraWxsLmludGVyYWN0aW9uTW9kZWwuSW50ZW50IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHNsb3RzOiB0aGlzLmdlbmVyYXRlU2xvdHMoKSxcbiAgICAgICAgICAgIHNhbXBsZXM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVTbG90cygpOiB2MS5za2lsbC5pbnRlcmFjdGlvbk1vZGVsLlNsb3REZWZpbml0aW9uW10ge1xuICAgICAgICBjb25zdCBzbG90czogdjEuc2tpbGwuaW50ZXJhY3Rpb25Nb2RlbC5TbG90RGVmaW5pdGlvbltdID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdmZWVkYmFjaycsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuRkVFREJBQ0tcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2FjdGlvbicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuQUNUSU9OXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YXJnZXQnLFxuICAgICAgICAgICAgICAgIHR5cGU6IFNoYXJlZFNsb3RUeXBlLlRBUkdFVFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAncHJlcG9zaXRpb24uYScsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuUFJFUE9TSVRJT05cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3ByZXBvc2l0aW9uLmInLFxuICAgICAgICAgICAgICAgIHR5cGU6IFNoYXJlZFNsb3RUeXBlLlBSRVBPU0lUSU9OXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdjb25qdW5jdGlvbicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuQ09OSlVOQ1RJT05cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3RhcmdldC5hJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBTaGFyZWRTbG90VHlwZS5UQVJHRVRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0FNQVpPTi5EQVRFLmEnLFxuICAgICAgICAgICAgICAgIHR5cGU6IEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YXJnZXQuYicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuVEFSR0VUXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdBTUFaT04uREFURS5iJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaGVhZCcsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuSEVBRFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAndGFpbCcsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuVEFJTFxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiBzbG90cztcbiAgICB9XG59XG4iXX0=